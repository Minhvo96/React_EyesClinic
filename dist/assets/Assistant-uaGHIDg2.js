import{n as F,h as L,r as n,u as C,i as D,o as O,j as e,k as R,p as v,m as q,S as l}from"./index-QqQ6tGiF.js";import{S as A,p as M}from"./Progress-yjJAlUg_.js";import"./index-5elrTyU-.js";const V=R({leftEye:v().required("Nhập thị lực của bệnh nhân").typeError("Nhập số thị lực cho bệnh nhân").min(0,"Thị lực không được nhỏ hơn 0").max(10,"Thị lực không được lớn hơn 10"),rightEye:v().required("Nhập thị lực của bệnh nhân").typeError("Nhập số thị lực cho bệnh nhân").min(0,"Thị lực không được nhỏ hơn 0").max(10,"Thị lực không được lớn hơn 10")});function G(){var h,o,m,x,u,g,p,y,b,f,j;F();const{bookingId:N}=L(),[s,E]=n.useState({}),[w,c]=n.useState(!0),[i,S]=n.useState({leftEye:"",rightEye:""}),T=C(),{register:r,handleSubmit:B,formState:{errors:t},reset:Y}=D({resolver:O(V),mode:"onBlur",criteriaMode:"all"}),k=async()=>{const a=await q.getBookingById(N);E(a),c(!1)},d=a=>{S({...i,[a.target.name]:a.target.value})},I=()=>{l.fire({title:`Thêm số đo thị lực cho bệnh nhân ${s.customer.user.fullName}?`,showCancelButton:!0,confirmButtonText:"Lưu ngay",cancelButtonText:"Hủy"}).then(async a=>{if(a.isConfirmed){const $={idBooking:String(s.id),idDoctor:"1",eyeSight:i.leftEye+", "+i.rightEye,diagnose:"",note:"",idsMedicine:[]};c(!0),await M.createPrescription($),l.fire("Thêm thông tin thành công!","","success"),setTimeout(()=>{l.close()},2e3),T("/dashboard/waiting-list")}})};return n.useEffect(()=>{k()},[]),e.jsx(e.Fragment,{children:w?e.jsx("span",{class:"loader"}):e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{children:[e.jsx("div",{className:"d-flex align-items-center justify-content-between",children:e.jsx("h5",{className:"card-title fw-semibold mb-4 fs-6",children:"Đo thị lực"})}),e.jsx("div",{style:{width:"80%",marginLeft:100},children:e.jsx(A,{eyeSightValues:i})})]}),e.jsxs("div",{className:"d-flex row ml-1 mt-5 gap-5",children:[e.jsx("div",{className:"col-lg-7 d-flex align-items-around",style:{padding:0},children:e.jsxs("div",{className:"card w-100",style:{"--bs-card-box-shadow":"rgb(171 145 145) 0px 0px 2px 0px, rgb(171 145 145) 0px 12px 24px -4px"},children:[e.jsxs("div",{className:"card-body p-4 d-flex justify-content-center align-items-center",children:[e.jsxs("div",{className:"text-center d-flex align-items-center",style:{flexDirection:"column",position:"relative"},children:[e.jsx("div",{children:e.jsx("span",{className:"font-weight-bold",children:"Thị lực mắt phải"})}),e.jsx("img",{src:"../../images/RightEyeIcon.png",alt:"",style:{width:"60%"}}),e.jsxs("div",{style:{position:"relative",width:"60%"},children:[e.jsx("input",{type:"text",className:`form-control text-center ${(h=t==null?void 0:t.rightEye)!=null&&h.message?"is-invalid":""}`,...r("rightEye"),name:"rightEye",style:{width:"100%"},onInput:d}),e.jsx("span",{className:"invalid-feedback",children:(o=t==null?void 0:t.rightEye)==null?void 0:o.message}),e.jsx("div",{style:{position:"absolute",top:`${t!=null&&t.rightEye?"36%":"50%"}`,right:"50px",transform:"translateY(-50%)"},children:"/ 10"})]})]}),e.jsxs("div",{className:"text-center ml-3 d-flex align-items-center",style:{flexDirection:"column",position:"relative"},children:[e.jsx("div",{children:e.jsx("span",{className:"font-weight-bold",children:"Thị lực mắt trái"})}),e.jsx("img",{src:"../../images/LeftEyeIcon.png",alt:"",style:{width:"60%"}}),e.jsxs("div",{style:{position:"relative",width:"60%"},children:[e.jsx("input",{type:"text",className:`form-control text-center ${(m=t==null?void 0:t.leftEye)!=null&&m.message?"is-invalid":""}`,...r("leftEye"),name:"leftEye",style:{width:"100%"},onInput:d}),e.jsx("span",{className:"invalid-feedback",children:(x=t==null?void 0:t.leftEye)==null?void 0:x.message}),e.jsx("div",{style:{position:"absolute",top:`${t!=null&&t.leftEye?"36%":"50%"}`,right:"50px",transform:"translateY(-50%)"},children:"/ 10"})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn btn-primary mb-3 mr-3",onClick:B(I),children:"Lưu thông tin thị lực"})})]})}),e.jsx("div",{className:"col-lg-4 d-flex align-items-around text-center",style:{padding:0},children:e.jsx("div",{className:"card w-100",style:{"--bs-card-box-shadow":"rgb(171 145 145) 0px 0px 2px 0px, rgb(171 145 145) 0px 12px 24px -4px"},children:e.jsxs("div",{className:"card-body p-4",children:[e.jsx("p",{className:"font-weight-bold",children:"Thông tin bệnh nhân"}),e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:"../../images/user-icon.png",style:{width:150,borderRadius:"50%"}}),e.jsx("p",{style:{fontWeight:"bold"},readOnly:!0,children:(g=(u=s==null?void 0:s.customer)==null?void 0:u.user)==null?void 0:g.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"basic-url",className:"form-label",children:"Năm sinh:"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control text-center",id:"basic-url","aria-describedby":"basic-addon3",readOnly:!0,value:(p=s==null?void 0:s.customer)==null?void 0:p.age})}),e.jsx("label",{htmlFor:"basic-url",className:"form-label",children:"Số điện thoại:"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control text-center",id:"basic-url","aria-describedby":"basic-addon3",readOnly:!0,value:(b=(y=s==null?void 0:s.customer)==null?void 0:y.user)==null?void 0:b.phoneNumber})}),e.jsx("label",{htmlFor:"basic-url",className:"form-label",children:"Địa chỉ nhà:"}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{type:"text",className:"form-control text-center",id:"basic-url","aria-describedby":"basic-addon3",readOnly:!0,value:(j=(f=s==null?void 0:s.customer)==null?void 0:f.user)==null?void 0:j.address})})]})]})})})]})]})})}export{G as default};
